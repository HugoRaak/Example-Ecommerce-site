<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	{% block head %}{% endblock %}
	<link href="/css/layout.css" rel="stylesheet" type="text/css"/>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
</head>
<body>
	<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
		<a class="navbar-brand" href="{{ pathFor('article.index') }}">
			<img class="rotation" src="/img/logo.png" alt="Logo Agora Francia" height="70" width="70">
		</a>
		<div class="collapse navbar-collapse" id="navbarNav">
			<ul class="navbar-nav ml-auto">
			<li class="nav-item">
				<a class="nav-link {{is_subpath('article.index') ? 'active'}}" href="{{ pathFor('article.index') }}">Accueil</a>
			</li>
			<li class="nav-item">
				<a class="nav-link {{is_subpath('article.browse.index') ? 'active'}}" href="{{pathFor('article.browse.index')}}">Parcourir</a>
			</li>
			<li class="nav-item">
				<a class="nav-link {{is_subpath('contact') ? 'active'}}" href="{{pathFor('contact')}}">Contact</a>
			</li>
			<li class="nav-item">
				<a class="nav-link {{is_subpath('user.article.index') ? 'active'}}" href="{{ pathFor('user.article.index') }}">Compte</a>
			</li>
			</ul>

			{% if current_user() %}
				<div class="nav-item ms-auto text-center" style="margin-right: 30px;">
					<div class="navbar-text text-white">Connecté en tant que {{current_user().__get('username')}}</div>
					<div class="d-flex justify-content-center">
						{% if is_admin() %}
							<a href="{{pathFor('admin')}}"><button type="submit" class="btn btn-outline-light mr-auto">Administration</button></a>
						{% endif %}
						<form action="{{pathFor('auth.logout')}}" method="POST" onsubmit="return confirm('Etes-vous sur de vouloir vous déconnecter');">
						{{form_token(pathFor('auth.logout'))}}
							<input type="hidden" name="save_uri" value="{{current_path()}}">
							<button type="submit" class="btn btn-danger mr-auto mx-2">Se déconnecter</button>
						</form>
					</div>
				</div>
			{% else %}
				<div class="nav-item ms-auto" style="margin-right: 30px;">
					<form action="{{pathFor('auth.login')}}" method="post">
					{{form_token(pathFor('auth.login'))}}
						<input type="hidden" name="save_uri" value="{{current_path()}}">
						<button type="submit" class="btn btn-outline-light">Se connecter | Créer un compte</button>
					</form>
				</div>
			{% endif %}
		</div>
	</nav>
	

	<div class="container mt-4" id="content">
		{% include "flash.twig" %}
		{% block content %}{% endblock %}
	</div>
	
	{% include "footer.twig" %}
</body>
</html>